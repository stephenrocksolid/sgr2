{% load static %}

{% if build_lists %}
    <table class="related-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Notes</th>
                <th>Items</th>
                <th style="width: 50px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for build_list in build_lists %}
                <tr data-href="{% url 'inventory:build_list_detail' build_list.pk %}" 
                    onclick="window.location.href=this.dataset.href;">
                    <td>
                        <strong>{{ build_list.name }}</strong>
                    </td>
                    <td>{{ build_list.notes|default:"—"|truncatewords:10 }}</td>
                    <td>{{ build_list.items.count }}</td>
                    <td onclick="event.stopPropagation();">
                        <form method="post" 
                              action="{% url 'inventory:engine_build_list_remove' engine.pk build_list.pk %}"
                              hx-post="{% url 'inventory:engine_build_list_remove' engine.pk build_list.pk %}"
                              hx-target="#engine-build-lists-container"
                              hx-swap="innerHTML"
                              hx-confirm="Remove this build list from engine?"
                              style="display: inline;">
                            {% csrf_token %}
                            <button class="btn-icon btn-danger" type="submit" title="Remove">✕</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div class="empty-message">
        <p>No build lists assigned to this engine yet.</p>
    </div>
{% endif %}
