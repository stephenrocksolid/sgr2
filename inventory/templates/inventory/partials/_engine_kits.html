{% load static %}

{% if kits %}
    <table class="related-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Parts Count</th>
                <th>Notes</th>
                <th style="width: 50px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for kit in kits %}
                <tr data-href="{% url 'inventory:kit_detail' kit.pk %}" 
                    onclick="window.location.href=this.dataset.href;">
                    <td>
                        <strong>{{ kit.name }}</strong>
                    </td>
                    <td>{{ kit.items.count }}</td>
                    <td>{{ kit.notes|default:"—"|truncatewords:10 }}</td>
                    <td onclick="event.stopPropagation();">
                        <form method="post" 
                              action="{% url 'inventory:engine_kit_remove' engine.pk kit.pk %}"
                              hx-post="{% url 'inventory:engine_kit_remove' engine.pk kit.pk %}"
                              hx-target="#engine-kits-container"
                              hx-swap="innerHTML"
                              hx-confirm="Remove this kit from the engine?"
                              style="display: inline;">
                            {% csrf_token %}
                            <button class="btn-icon btn-danger" type="submit" title="Remove">✕</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div class="empty-message">
        <p>No kits assigned yet.</p>
    </div>
{% endif %}
