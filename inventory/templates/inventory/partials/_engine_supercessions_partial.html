{% if supersedes or superseded_by %}
    <div class="supercessions-container">
        {% if supersedes %}
            <div class="supersedes-section mb-4">
                <h5 style="color: var(--gray-700); font-size: 0.9375rem; font-weight: 600; margin-bottom: 0.5rem;">This Engine Supersedes (Older):</h5>
                <table class="related-table">
                    <thead>
                        <tr>
                            <th>Make</th>
                            <th>Model</th>
                            <th>Identifier</th>
                            <th style="width: 50px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for superseded in supersedes %}
                            <tr data-href="{% url 'inventory:engine_detail' superseded.pk %}" 
                                onclick="window.location.href=this.dataset.href;">
                                <td>{{ superseded.engine_make|default:"—" }}</td>
                                <td>{{ superseded.engine_model|default:"—" }}</td>
                                <td>{{ superseded.identifier|default:"—" }}</td>
                                <td onclick="event.stopPropagation();">
                                    <form hx-post="{% url 'inventory:engine_supercession_remove' engine.pk superseded.pk %}"
                                          hx-target="#engine-supercessions-section"
                                          hx-swap="innerHTML"
                                          hx-confirm="Are you sure you want to remove this supercession relationship?"
                                          style="display: inline;">
                                        {% csrf_token %}
                                        <button class="btn-icon btn-danger" type="submit" title="Remove">✕</button>
                                    </form>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
        
        {% if superseded_by %}
            <div class="superseded-by-section">
                <h5 style="color: var(--gray-700); font-size: 0.9375rem; font-weight: 600; margin-bottom: 0.5rem;">This Engine is Superseded By (Newer):</h5>
                <table class="related-table">
                    <thead>
                        <tr>
                            <th>Make</th>
                            <th>Model</th>
                            <th>Identifier</th>
                            <th style="width: 50px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for superseding in superseded_by %}
                            <tr data-href="{% url 'inventory:engine_detail' superseding.pk %}" 
                                onclick="window.location.href=this.dataset.href;">
                                <td>{{ superseding.engine_make|default:"—" }}</td>
                                <td>{{ superseding.engine_model|default:"—" }}</td>
                                <td>{{ superseding.identifier|default:"—" }}</td>
                                <td onclick="event.stopPropagation();">
                                    <form hx-post="{% url 'inventory:engine_supercession_remove' superseding.pk engine.pk %}"
                                          hx-target="#engine-supercessions-section"
                                          hx-swap="innerHTML"
                                          hx-confirm="Are you sure you want to remove this supercession relationship?"
                                          style="display: inline;">
                                        {% csrf_token %}
                                        <button class="btn-icon btn-danger" type="submit" title="Remove">✕</button>
                                    </form>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
    </div>
{% else %}
    <div class="empty-message">
        <p>This engine has no supercession relationships yet.</p>
    </div>
{% endif %}
