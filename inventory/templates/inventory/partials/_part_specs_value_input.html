{% load inventory_extras %}

{% if attribute.data_type == 'text' %}
    <input type="text" 
           name="value" 
           value="{{ current_value }}"
           class="form-control"
           {% if attribute.is_required %}required{% endif %}
           placeholder="Enter {{ attribute.name|lower }}">

{% elif attribute.data_type == 'int' %}
    <input type="number" 
           step="1" 
           name="value" 
           value="{{ current_value }}"
           class="form-control"
           {% if attribute.is_required %}required{% endif %}
           placeholder="Enter {{ attribute.name|lower }}">
    {% if attribute.unit %}
        <small class="unit-text">{{ attribute.unit }}</small>
    {% endif %}

{% elif attribute.data_type == 'dec' %}
    <input type="number" 
           step="0.000001" 
           name="value" 
           value="{{ current_value }}"
           class="form-control"
           {% if attribute.is_required %}required{% endif %}
           placeholder="Enter {{ attribute.name|lower }}">
    {% if attribute.unit %}
        <small class="unit-text">{{ attribute.unit }}</small>
    {% endif %}

{% elif attribute.data_type == 'bool' %}
    <div class="checkbox-wrapper">
        <input type="checkbox" 
               name="value" 
               value="true"
               {% if current_value == 'true' or current_value == 'True' or current_value == '1' or current_value == 'yes' %}checked{% endif %}
               class="form-check-input"
               {% if attribute.is_required %}required{% endif %}>
        <label class="form-check-label">
            {{ attribute.name }}
        </label>
    </div>

{% elif attribute.data_type == 'date' %}
    <input type="date" 
           name="value" 
           value="{{ current_value }}"
           class="form-control"
           {% if attribute.is_required %}required{% endif %}>

{% elif attribute.data_type == 'choice' %}
    <select name="value" 
            class="form-control"
            {% if attribute.is_required %}required{% endif %}>
        <option value="">-- Select {{ attribute.name }} --</option>
        {% for choice in attribute.choices.all %}
            <option value="{{ choice.value }}" 
                    {% if current_value == choice.value %}selected{% endif %}>
                {{ choice.label }}
            </option>
        {% endfor %}
    </select>
{% endif %}

{% if attribute.help_text %}
    <small class="form-text text-muted">{{ attribute.help_text }}</small>
{% endif %}

<style>
.form-control {
    width: 100%;
    padding: 6px 10px;
    border: 1px solid #007bff;
    border-radius: 4px;
    font-size: 14px;
}

.form-control:focus {
    outline: none;
    border-color: #0056b3;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-check-input {
    margin: 0;
}

.form-check-label {
    margin: 0;
    font-weight: normal;
    font-size: 14px;
}

.unit-text {
    display: block;
    font-size: 12px;
    color: #6c757d;
    margin-top: 2px;
}

.form-text {
    display: block;
    font-size: 12px;
    color: #6c757d;
    margin-top: 4px;
}
</style>
