{% if engines %}
    {% for engine in engines %}
        <div class="engine-result-row"
             hx-post="{% url 'inventory:kit_engine_add' kit.id %}"
             hx-vals='{"engine_id": {{ engine.id }}}'
             hx-target="#kit-engines-table-container"
             hx-swap="innerHTML"
             hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
             hx-on::after-request="if(event.detail.successful) this.closest('.modal-overlay').remove();">
            <div class="result-title">
                {{ engine.engine_make }} {{ engine.engine_model }}
            </div>
            <div class="result-details">
                {% if engine.serial_number %}
                    <span><strong>S/N:</strong> {{ engine.serial_number }}</span>
                {% endif %}
                {% if engine.status %}
                    <span class="result-badge">{{ engine.status }}</span>
                {% endif %}
                {% if engine.sg_engine %}
                    <span><strong>SG:</strong> {{ engine.sg_engine.sg_make }} {{ engine.sg_engine.sg_model }}</span>
                {% endif %}
            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <div class="empty-state-icon">üîç</div>
        <p class="empty-state-text">
            {% if request.GET.q %}
                No engines found matching your search.
            {% else %}
                Start typing to search for engines...
            {% endif %}
        </p>
    </div>
{% endif %}


