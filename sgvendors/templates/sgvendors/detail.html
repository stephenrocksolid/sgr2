{% extends 'base.html' %}
{% load static %}

{% block title %}{{ sg_vendor.name }} - SG Vendor Details{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{{ sg_vendor.name }}</h1>
    <div class="header-actions">
        <a href="{% url 'sgvendors:edit' sg_vendor.id %}" class="btn btn-primary">Edit SG Vendor</a>
        <a href="{% url 'sgvendors:index' %}" class="btn btn-secondary">Back to SG Vendors</a>
    </div>
</div>

<div class="detail-grid">
    <div class="detail-card">
        <h3>SG Vendor Information</h3>
        <div class="detail-item">
            <label>Name:</label>
            <span>{{ sg_vendor.name }}</span>
        </div>
        {% if sg_vendor.website %}
        <div class="detail-item">
            <label>Website:</label>
            <span><a href="{{ sg_vendor.website }}" target="_blank">{{ sg_vendor.website }}</a></span>
        </div>
        {% endif %}
        {% if sg_vendor.notes %}
        <div class="detail-item">
            <label>Notes:</label>
            <span>{{ sg_vendor.notes }}</span>
        </div>
        {% endif %}
        <div class="detail-item">
            <label>Created:</label>
            <span>{{ sg_vendor.created|date:"M j, Y g:i A" }}</span>
        </div>
        <div class="detail-item">
            <label>Last Updated:</label>
            <span>{{ sg_vendor.updated|date:"M j, Y g:i A" }}</span>
        </div>
    </div>
    
    <div class="detail-card">
        <h3>Linked Vendors ({{ linked_vendors.count }})</h3>
        {% if linked_vendors %}
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th>Vendor Name</th>
                            <th>Contact</th>
                            <th>Website</th>
                            <th>Created</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for vendor in linked_vendors %}
                        <tr>
                            <td><strong>{{ vendor.name }}</strong></td>
                            <td>
                                {% if vendor.contact_name %}
                                    {{ vendor.contact_name }}
                                    {% if vendor.email %}
                                        <br><a href="mailto:{{ vendor.email }}">{{ vendor.email }}</a>
                                    {% endif %}
                                    {% if vendor.phone %}
                                        <br>{{ vendor.phone }}
                                    {% endif %}
                                {% else %}
                                    —
                                {% endif %}
                            </td>
                            <td>
                                {% if vendor.website %}
                                    <a href="{{ vendor.website }}" target="_blank">Site</a>
                                {% else %}
                                    —
                                {% endif %}
                            </td>
                            <td>{{ vendor.created_at|date:"M j, Y" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="text-muted">No vendors are currently linked to this SG Vendor.</p>
        {% endif %}
    </div>
</div>
{% endblock %}







