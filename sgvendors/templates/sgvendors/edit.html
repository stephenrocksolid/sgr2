{% extends "base.html" %}
{% load static %}

{% block title %}{% if is_new %}New SG Vendor{% else %}{{ sg_vendor.name|default:"SG Vendor" }}{% endif %} - Spring Garden Repair{% endblock %}

{% block content %}
<div class="sgvendor-page">
    <!-- Sticky Header -->
    <div class="sgvendor-header">
        <div class="sgvendor-header-left">
            <div class="sgvendor-name-display">
                <span class="sgvendor-label">SG Vendor</span>
                <h1 class="sgvendor-name-title">{% if is_new %}New SG Vendor{% else %}{{ sg_vendor.name|default:"(No Name)" }}{% endif %}</h1>
            </div>
            {% if not is_new and linked_vendors.count > 0 %}
            <span class="sgvendor-linked-badge">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="8.5" cy="7" r="4"></circle>
                    <line x1="20" y1="8" x2="20" y2="14"></line>
                    <line x1="23" y1="11" x2="17" y2="11"></line>
                </svg>
                {{ linked_vendors.count }} Linked Vendor{{ linked_vendors.count|pluralize }}
            </span>
            {% endif %}
        </div>
        <div class="sgvendor-header-actions">
            <button type="button" class="btn btn-primary" onclick="document.getElementById('sgvendor-form').requestSubmit()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                    <polyline points="17 21 17 13 7 13 7 21"></polyline>
                    <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                {% if is_new %}Create SG Vendor{% else %}Save Changes{% endif %}
            </button>
            <a href="{% url 'sgvendors:index' %}" class="btn btn-outline">Cancel</a>
            {% if not is_new %}
            <button type="button" class="btn btn-danger-outline" 
                    onclick="confirmDelete()"
                    {% if linked_vendors.count > 0 %}disabled title="Cannot delete SG Vendor with linked vendors"{% endif %}>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
                Delete
            </button>
            {% endif %}
        </div>
    </div>

    <form method="post" id="sgvendor-form">
        {% csrf_token %}
        
        <div class="sgvendor-layout">
            <!-- Main Content Column -->
            <div class="sgvendor-main">
                <!-- Basic Information Card -->
                <div class="sgvendor-card">
                    <div class="sgvendor-card-header">
                        <div class="sgvendor-card-title">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>
                            Basic Information
                        </div>
                    </div>
                    <div class="sgvendor-card-body">
                        <div class="sgvendor-form-grid">
                            <div class="sgvendor-form-group sgvendor-form-full">
                                <label class="sgvendor-label">Vendor Name <span class="sgvendor-required">*</span></label>
                                <input type="text" name="name" value="{{ form.name.value|default_if_none:'' }}" 
                                       class="sgvendor-input {% if form.name.errors %}is-invalid{% endif %}" 
                                       placeholder="Enter SG Vendor name" required>
                                {% if form.name.errors %}<span class="field-error">{{ form.name.errors.0 }}</span>{% endif %}
                            </div>
                            <div class="sgvendor-form-group sgvendor-form-full">
                                <label class="sgvendor-label">Website</label>
                                <div class="sgvendor-input-with-icon">
                                    <svg class="sgvendor-input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="2" y1="12" x2="22" y2="12"></line>
                                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                                    </svg>
                                    <input type="url" name="website" value="{{ form.website.value|default_if_none:'' }}" 
                                           class="sgvendor-input sgvendor-input-icon-pad {% if form.website.errors %}is-invalid{% endif %}" 
                                           placeholder="https://example.com">
                                </div>
                                {% if form.website.errors %}<span class="field-error">{{ form.website.errors.0 }}</span>{% endif %}
                                <p class="sgvendor-field-hint">Enter the full URL including https://</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notes Card -->
                <div class="sgvendor-card">
                    <div class="sgvendor-card-header">
                        <div class="sgvendor-card-title">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="17" y1="10" x2="3" y2="10"></line>
                                <line x1="21" y1="6" x2="3" y2="6"></line>
                                <line x1="21" y1="14" x2="3" y2="14"></line>
                                <line x1="17" y1="18" x2="3" y2="18"></line>
                            </svg>
                            Additional Notes
                        </div>
                    </div>
                    <div class="sgvendor-card-body">
                        <div class="sgvendor-form-group">
                            <textarea name="notes" class="sgvendor-textarea {% if form.notes.errors %}is-invalid{% endif %}" 
                                      rows="4" placeholder="Add any additional notes about this SG Vendor...">{{ form.notes.value|default_if_none:'' }}</textarea>
                            {% if form.notes.errors %}<span class="field-error">{{ form.notes.errors.0 }}</span>{% endif %}
                        </div>
                    </div>
                </div>

                <!-- Linked Vendors Card -->
                {% if not is_new %}
                <div class="sgvendor-card">
                    <div class="sgvendor-card-header">
                        <div class="sgvendor-card-title">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                            </svg>
                            Linked Vendors
                            <span class="sgvendor-badge-count">{{ linked_vendors.count }}</span>
                        </div>
                    </div>
                    <div class="sgvendor-card-body p-0">
                        {% if linked_vendors %}
                        <div class="sgvendor-linked-table-wrap">
                            <table class="sgvendor-linked-table">
                                <thead>
                                    <tr>
                                        <th>Vendor Name</th>
                                        <th>Contact</th>
                                        <th>Website</th>
                                        <th>Created</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for vendor in linked_vendors %}
                                    <tr class="sgvendor-linked-row">
                                        <td class="sgvendor-linked-name">
                                            <span class="sgvendor-name-text">{{ vendor.name }}</span>
                                        </td>
                                        <td class="sgvendor-linked-contact">
                                            {% if vendor.contact_name or vendor.email or vendor.phone %}
                                            <div class="contact-info">
                                                {% if vendor.contact_name %}
                                                <span class="contact-name">{{ vendor.contact_name }}</span>
                                                {% endif %}
                                                {% if vendor.email %}
                                                <a href="mailto:{{ vendor.email }}" class="contact-email">
                                                    <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                                        <polyline points="22,6 12,13 2,6"></polyline>
                                                    </svg>
                                                    {{ vendor.email }}
                                                </a>
                                                {% endif %}
                                                {% if vendor.phone %}
                                                <span class="contact-phone">
                                                    <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                                    </svg>
                                                    {{ vendor.phone }}
                                                </span>
                                                {% endif %}
                                            </div>
                                            {% else %}
                                            <span class="sgvendor-no-data">—</span>
                                            {% endif %}
                                        </td>
                                        <td class="sgvendor-linked-website">
                                            {% if vendor.website %}
                                            <a href="{{ vendor.website }}" target="_blank" class="linked-website-link">
                                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                                    <polyline points="15 3 21 3 21 9"></polyline>
                                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                                </svg>
                                                Visit
                                            </a>
                                            {% else %}
                                            <span class="sgvendor-no-data">—</span>
                                            {% endif %}
                                        </td>
                                        <td class="sgvendor-linked-created">
                                            <span class="created-date">{{ vendor.created_at|date:"M j, Y" }}</span>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% else %}
                        <div class="sgvendor-empty-linked">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                            </svg>
                            <p>No vendors are currently linked to this SG Vendor.</p>
                            <p class="sgvendor-empty-hint">Vendors can be linked from the Vendors page or during import.</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar Column -->
            <div class="sgvendor-sidebar">
                {% if not is_new %}
                <!-- Quick Info Card -->
                <div class="sgvendor-card">
                    <div class="sgvendor-card-header">
                        <div class="sgvendor-card-title">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            Quick Info
                        </div>
                    </div>
                    <div class="sgvendor-card-body">
                        <div class="sgvendor-quick-info">
                            <div class="sgvendor-info-row">
                                <span class="sgvendor-info-label">Linked Vendors</span>
                                <span class="sgvendor-info-value">{{ linked_vendors.count }}</span>
                            </div>
                            <div class="sgvendor-info-row">
                                <span class="sgvendor-info-label">Created</span>
                                <span class="sgvendor-info-value">{{ sg_vendor.created|date:"M d, Y" }}</span>
                            </div>
                            {% if sg_vendor.updated %}
                            <div class="sgvendor-info-row">
                                <span class="sgvendor-info-label">Last Updated</span>
                                <span class="sgvendor-info-value">{{ sg_vendor.updated|date:"M d, Y" }}</span>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- External Links Card -->
                {% if sg_vendor.website %}
                <div class="sgvendor-card">
                    <div class="sgvendor-card-header">
                        <div class="sgvendor-card-title">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                            External Links
                        </div>
                    </div>
                    <div class="sgvendor-card-body">
                        <a href="{{ sg_vendor.website }}" target="_blank" class="sgvendor-external-link">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            Visit Website
                            <svg class="external-icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                        </a>
                    </div>
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </form>

    {% if not is_new %}
    <!-- Delete form (hidden) -->
    <form method="post" action="{% url 'sgvendors:delete' sg_vendor.pk %}" id="delete-form" style="display: none;">
        {% csrf_token %}
    </form>
    {% endif %}
</div>

<style>
/* SG Vendor Page Layout */
.sgvendor-page {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* Sticky Header */
.sgvendor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: white;
    padding: 1rem 1.5rem;
    margin: -2rem -1rem 1.5rem -1rem;
    border-bottom: 1px solid var(--gray-200);
    position: sticky;
    top: 0;
    z-index: 50;
    box-shadow: var(--shadow-sm);
}

.sgvendor-header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.sgvendor-name-display {
    display: flex;
    flex-direction: column;
}

.sgvendor-name-display .sgvendor-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--gray-500);
    font-weight: 600;
}

.sgvendor-name-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--gray-900);
    margin: 0;
    line-height: 1.2;
}

.sgvendor-linked-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    background: var(--gray-100);
    color: var(--gray-700);
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
}

.sgvendor-header-actions {
    display: flex;
    gap: 0.75rem;
}

.sgvendor-header-actions .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

/* Two Column Layout */
.sgvendor-layout {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 1.5rem;
    align-items: start;
}

.sgvendor-main {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.sgvendor-sidebar {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    position: sticky;
    top: 90px;
}

/* Card Styles */
.sgvendor-card {
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: 0.5rem;
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.sgvendor-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.875rem 1.25rem;
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
}

.sgvendor-card-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--gray-700);
}

.sgvendor-card-title svg {
    color: var(--gray-500);
}

.sgvendor-card-body {
    padding: 1.25rem;
}

.sgvendor-card-body.p-0 {
    padding: 0;
}

/* Form Elements */
.sgvendor-form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.sgvendor-form-group {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    margin-bottom: 0;
}

.sgvendor-form-full {
    grid-column: 1 / -1;
}

.sgvendor-label {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--gray-600);
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.sgvendor-required {
    color: var(--error);
}

.sgvendor-input,
.sgvendor-select,
.sgvendor-textarea {
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--gray-300);
    border-radius: 0.375rem;
    font-size: 0.875rem;
    color: var(--gray-900);
    background: white;
    transition: all 0.15s ease;
    width: 100%;
}

.sgvendor-input:focus,
.sgvendor-select:focus,
.sgvendor-textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(74, 85, 104, 0.1);
}

.sgvendor-input::placeholder,
.sgvendor-textarea::placeholder {
    color: var(--gray-400);
}

.sgvendor-input.is-invalid,
.sgvendor-textarea.is-invalid {
    border-color: var(--error);
}

.sgvendor-textarea {
    resize: vertical;
    min-height: 100px;
    line-height: 1.5;
}

/* Input with Icon */
.sgvendor-input-with-icon {
    position: relative;
}

.sgvendor-input-icon {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-400);
    pointer-events: none;
}

.sgvendor-input-icon-pad {
    padding-left: 2.5rem;
}

.sgvendor-field-hint {
    font-size: 0.75rem;
    color: var(--gray-500);
    margin: 0.25rem 0 0;
}

.field-error {
    font-size: 0.75rem;
    color: var(--error);
    margin-top: 0.25rem;
}

/* Badge Count */
.sgvendor-badge-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    height: 20px;
    padding: 0 0.375rem;
    background: var(--gray-200);
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--gray-600);
}

/* Quick Info */
.sgvendor-quick-info {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.sgvendor-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--gray-100);
}

.sgvendor-info-row:last-child {
    border-bottom: none;
}

.sgvendor-info-label {
    font-size: 0.8125rem;
    color: var(--gray-600);
}

.sgvendor-info-value {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--gray-900);
}

/* External Link */
.sgvendor-external-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    background: #e0f2fe;
    border-radius: 0.375rem;
    color: #0369a1;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.15s ease;
}

.sgvendor-external-link:hover {
    background: #bae6fd;
    color: #075985;
}

.sgvendor-external-link .external-icon {
    margin-left: auto;
}

/* Linked Vendors Table */
.sgvendor-linked-table-wrap {
    overflow: auto;
    max-height: 400px;
}

.sgvendor-linked-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

.sgvendor-linked-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
}

.sgvendor-linked-table th {
    padding: 0.5rem 0.75rem;
    text-align: left;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--gray-500);
    background: var(--gray-50);
    border-bottom: 2px solid var(--gray-200);
    white-space: nowrap;
}

.sgvendor-linked-table th:first-child { padding-left: 1rem; }
.sgvendor-linked-table th:last-child { padding-right: 1rem; }

.sgvendor-linked-table td {
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid var(--gray-100);
    vertical-align: middle;
    font-size: 0.8125rem;
}

.sgvendor-linked-table td:first-child { padding-left: 1rem; }
.sgvendor-linked-table td:last-child { padding-right: 1rem; }

.sgvendor-linked-row:last-child td {
    border-bottom: none;
}

.sgvendor-linked-row:hover {
    background: #f8fafc;
}

.sgvendor-name-text {
    font-weight: 600;
    color: var(--gray-900);
}

/* Contact Info */
.contact-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.contact-name {
    font-weight: 500;
    color: var(--gray-800);
}

.contact-email,
.contact-phone {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    color: var(--gray-600);
}

.contact-email {
    color: #0369a1;
    text-decoration: none;
}

.contact-email:hover {
    text-decoration: underline;
}

/* Website Link */
.linked-website-link {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.2rem 0.5rem;
    background: #e0f2fe;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    color: #0369a1;
    text-decoration: none;
    transition: all 0.15s ease;
}

.linked-website-link:hover {
    background: #bae6fd;
    color: #075985;
}

/* Created Date */
.created-date {
    font-size: 0.8rem;
    color: var(--gray-600);
}

/* Empty State */
.sgvendor-empty-linked {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem 2rem;
    text-align: center;
}

.sgvendor-empty-linked svg {
    color: var(--gray-300);
    margin-bottom: 0.75rem;
}

.sgvendor-empty-linked p {
    margin: 0;
    font-size: 0.875rem;
    color: var(--gray-500);
}

.sgvendor-empty-hint {
    font-size: 0.75rem !important;
    color: var(--gray-400) !important;
    margin-top: 0.25rem !important;
}

.sgvendor-no-data {
    color: var(--gray-400);
}

/* Button Variants */
.btn-outline {
    background: white;
    color: var(--gray-700);
    border: 1px solid var(--gray-300);
}

.btn-outline:hover {
    background: var(--gray-50);
    border-color: var(--gray-400);
    text-decoration: none;
}

.btn-danger-outline {
    background: white;
    color: var(--error);
    border: 1px solid var(--gray-300);
}

.btn-danger-outline:hover:not(:disabled) {
    background: #fef2f2;
    border-color: var(--error);
}

.btn-danger-outline:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Responsive */
@media (max-width: 1024px) {
    .sgvendor-layout {
        grid-template-columns: 1fr;
    }
    
    .sgvendor-sidebar {
        position: static;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
    }
}

@media (max-width: 768px) {
    .sgvendor-sidebar {
        grid-template-columns: 1fr;
    }
    
    .sgvendor-form-grid {
        grid-template-columns: 1fr;
    }
    
    .sgvendor-linked-table th:nth-child(2),
    .sgvendor-linked-table td:nth-child(2),
    .sgvendor-linked-table th:nth-child(4),
    .sgvendor-linked-table td:nth-child(4) {
        display: none;
    }
}

@media (max-width: 640px) {
    .sgvendor-header {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
    }
    
    .sgvendor-header-left {
        flex-wrap: wrap;
    }
    
    .sgvendor-header-actions {
        flex-wrap: wrap;
    }
}
</style>

<script>
{% if not is_new %}
function confirmDelete() {
    {% if linked_vendors.count > 0 %}
    alert('Cannot delete this SG Vendor because it has linked vendors.');
    {% else %}
    if(confirm('Are you sure you want to delete this SG Vendor? This action cannot be undone.')) {
        document.getElementById('delete-form').submit();
    }
    {% endif %}
}
{% endif %}
</script>
{% endblock %}

