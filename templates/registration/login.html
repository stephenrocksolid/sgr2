{% extends "login_base.html" %}
{% load static %}

{% block title %}Login - SGR Part Manager{% endblock %}

{% block content %}
<div class="w-full max-w-sm" style="width: 100%; max-width: 24rem;">
  <div class="bg-white rounded-2xl shadow-xl overflow-hidden" style="background-color: white; border-radius: 1rem; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); border: 1px solid var(--gray-200); overflow: hidden;">
    <div class="px-6 pt-6 pb-4 text-center" style="padding: 1.5rem 1.5rem 1rem 1.5rem; text-align: center;">
      <h1 class="text-xl font-semibold text-gray-900" style="font-size: 1.25rem; font-weight: 600; color: var(--gray-900); margin: 0 0 0.25rem 0;">SGR Part Manager</h1>
      <p class="text-gray-500 mt-1" style="color: var(--gray-500); margin: 0.25rem 0 0 0; font-size: 0.875rem;">Please sign in to continue</p>
      
      {% if form.non_field_errors %}
        <div class="mt-3 rounded-md bg-red-50 p-2 text-sm text-red-700" style="margin-top: 0.75rem; border-radius: 0.375rem; background-color: #fef2f2; padding: 0.5rem; font-size: 0.875rem; color: var(--brand-red);">
          {% for error in form.non_field_errors %}
            {{ error }}
          {% endfor %}
        </div>
      {% endif %}
      
      {% if messages %}
        {% for message in messages %}
          <div class="mt-3 rounded-md p-2 text-sm" style="margin-top: 0.75rem; border-radius: 0.375rem; padding: 0.5rem; font-size: 0.875rem; 
                      {% if message.tags == 'error' %}background-color: #fef2f2; color: var(--brand-red);
                      {% elif message.tags == 'warning' %}background-color: #fffbeb; color: var(--warning);
                      {% elif message.tags == 'success' %}background-color: #f0fff4; color: var(--success);
                      {% else %}background-color: var(--gray-100); color: var(--gray-700);{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    </div>

    <form method="post" action="{% url 'login' %}" class="px-6 pb-6 space-y-3" style="padding: 0 1.5rem 1.5rem 1.5rem;">
      {% csrf_token %}
      {# preserve ?next=â€¦ #}
      {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}

      <div style="margin-bottom: 0.75rem;">
        <label class="block text-sm font-medium text-gray-700 mb-1" style="display: block; font-size: 0.875rem; font-weight: 500; color: var(--gray-700); margin-bottom: 0.25rem;">Username</label>
        <input name="{{ form.username.name }}" type="text" autocomplete="username"
               class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
               style="width: 100%; border-radius: 0.375rem; border: 1px solid var(--gray-300); padding: 0.5rem 0.75rem; color: var(--gray-900); font-size: 1rem; transition: all 0.2s ease;"
               value="{{ form.username.value|default_if_none:'' }}"
               onfocus="this.style.borderColor='var(--brand-red)'; this.style.boxShadow='0 0 0 3px rgba(229, 62, 62, 0.1)'"
               onblur="this.style.borderColor='var(--gray-300)'; this.style.boxShadow='none'">
        {% if form.username.errors %}
          <p class="mt-1 text-sm text-red-600" style="margin-top: 0.25rem; font-size: 0.875rem; color: var(--brand-red);">{{ form.username.errors|striptags }}</p>
        {% endif %}
      </div>

      <div style="margin-bottom: 0.75rem;">
        <label class="block text-sm font-medium text-gray-700 mb-1" style="display: block; font-size: 0.875rem; font-weight: 500; color: var(--gray-700); margin-bottom: 0.25rem;">Password</label>
        <input name="{{ form.password.name }}" type="password" autocomplete="current-password"
               class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
               style="width: 100%; border-radius: 0.375rem; border: 1px solid var(--gray-300); padding: 0.5rem 0.75rem; color: var(--gray-900); font-size: 1rem; transition: all 0.2s ease;"
               onfocus="this.style.borderColor='var(--brand-red)'; this.style.boxShadow='0 0 0 3px rgba(229, 62, 62, 0.1)'"
               onblur="this.style.borderColor='var(--gray-300)'; this.style.boxShadow='none'">
        {% if form.password.errors %}
          <p class="mt-1 text-sm text-red-600" style="margin-top: 0.25rem; font-size: 0.875rem; color: var(--brand-red);">{{ form.password.errors|striptags }}</p>
        {% endif %}
      </div>

      <div style="margin-top: 1.5rem;">
      <button type="submit"
              class="w-full bg-red-600 text-white font-medium rounded-md py-2 hover:bg-red-700 transition"
              style="width: 100%; background-color: var(--brand-red); color: white; font-weight: 500; border-radius: 0.375rem; padding: 0.5rem 0; border: none; cursor: pointer; font-size: 1rem; transition: all 0.2s ease;"
              onmouseover="this.style.backgroundColor='var(--brand-red-dark)'"
              onmouseout="this.style.backgroundColor='var(--brand-red)'">
        Sign In
      </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}